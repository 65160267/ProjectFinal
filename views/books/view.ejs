<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title><%= book.title %></title>
    <link rel="stylesheet" href="/css/style.css" />
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/chat.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="header-inner container">
        <div class="brand">SwapABook</div>
        <form class="search" action="/" method="get">
          <input name="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠" />
          <button type="submit">üîç</button>
        </form>
        <nav class="header-actions">
          <a href="/books">üõçÔ∏è</a>
          <a href="/books/new">‚ûï</a>
          <a href="/auth/logout">üîì</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="detail-wrap">
        <div class="detail-card">
          <div class="detail-inner">
            <div class="detail-media">
              <% /* show large image / thumbnail or placeholder */ %>
              <div class="detail-image" style="background-image: url('<%= book.thumbnail %>')"></div>
            </div>
            <div class="detail-info">
              <h2 class="detail-title"><%= book.title %></h2>

              <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ó‡πá‡∏Å‡∏™‡πå -->
              <div style="margin-top:10px">
                <strong>üè∑Ô∏è ‡πÅ‡∏ó‡πá‡∏Å:</strong> 
                <span class="badge" style="background: #f3e5f5; color: #7b1fa2;"><%= book.tags %></span>
              </div>

              <!-- ‡∏™‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
              <div style="margin-top:10px">
                <strong>‚≠ê ‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</strong>
                <% if (book.condition === 'new') { %>
                  <span class="pill condition" style="padding: 4px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; background: #e8f5e8; color: #2e7d32;"><%= book.conditionText %></span>
                <% } else if (book.condition === 'good') { %>
                  <span class="pill condition" style="padding: 4px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; background: #fff3e0; color: #f57c00;"><%= book.conditionText %></span>
                <% } else { %>
                  <span class="pill condition" style="padding: 4px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; background: #fce4ec; color: #c2185b;"><%= book.conditionText %></span>
                <% } %>
              </div>

              <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á -->
              <div style="margin-top:16px; padding-top:12px; border-top:1px solid #e5e5e5;">
                <h3 style="color: var(--muted); font-size: 14px; margin-bottom: 8px;">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                <div style="background: #f8f9fa; padding: 10px; border-radius: 6px;">
                  <div style="margin-bottom: 6px;">
                    <strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> <%= book.ownerName %>
                  </div>
                  <div>
                    <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong> <%= book.ownerLocation %>
                  </div>
                </div>
              </div>

              <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏û‡∏™‡∏ï‡πå -->
              <div style="margin-top:12px; padding-top:12px; border-top:1px solid #e5e5e5;">
                <h3 style="color: var(--muted); font-size: 14px; margin-bottom: 8px;">üìÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏û‡∏™‡∏ï‡πå</h3>
                <div style="font-size: 13px; color: #666;">
                  <div style="margin-bottom: 4px;">
                    <strong>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</strong> #<%= book.id %>
                  </div>
                  <div style="margin-bottom: 4px;">
                    <strong>‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠:</strong> <%= book.createdDate %>
                  </div>
                  <% if (book.updatedDate) { %>
                    <div>
                      <strong>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</strong> <%= book.updatedDate %>
                    </div>
                  <% } %>
                </div>
              </div>

              <!-- ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
              <div style="margin-top:20px; padding-top:16px; border-top:2px solid #f0f0f0;">
                <h3 style="color: var(--muted); font-size: 16px; margin-bottom: 8px;">üìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
                <div class="description-box" style="background: #f8f9fa; padding: 12px; border-radius: 8px; line-height: 1.5; white-space: pre-wrap;">
                  <%= book.description %>
                </div>
              </div>

              <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô -->
              <div style="margin-top:20px; padding-top:16px; border-top:2px solid #f0f0f0;">
                <h3 style="color: var(--muted); font-size: 16px; margin-bottom: 12px;">üîÑ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô</h3>
                
                <div style="background: #fafafa; padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                  <div style="margin-bottom: 8px;">
                    <strong>üí´ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å‡∏Å‡∏±‡∏ö:</strong> 
                    <span style="color: var(--accent-700); font-weight: 600;"><%= book.wanted %></span>
                  </div>
                  <div style="margin-bottom: 8px;">
                    <strong>üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏Å:</strong> 
                    <span style="color: var(--accent-700);"><%= book.exchangeLocation %></span>
                  </div>
                  <div>
                    <strong>‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong>
                    <span class="pill <%= book.isAvailable ? 'available' : 'unavailable' %>">
                      <%= book.availabilityText %>
                    </span>
                  </div>
                </div>

                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°) -->
                <% if (book.isAvailable) { %>
                  <div style="margin-top:14px">
                    <label for="pick" style="color: var(--muted); font-weight: 600;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏°‡∏≤‡πÅ‡∏•‡∏Å:</label>
                    <select id="pick" class="select" style="margin-top: 6px;">
                      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì --</option>
                      <option value="1">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ A ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</option>
                      <option value="2">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ B ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</option>
                    </select>
                  </div>

                  <div style="margin-top:16px; display: flex; gap: 8px;">
                    <button class="btn btn-primary" style="flex: 1;">üí¨ ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡πÅ‡∏•‡∏Å</button>
                    <button class="btn btn-ghost" onclick="window.history.back()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                  </div>
                <% } else { %>
                  <div class="alert" style="padding:12px; background:#ffe6e6; border:1px solid #ffcccc; border-radius:8px; color:#cc0000; margin-top: 12px;">
                    ‚ö†Ô∏è ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ
                  </div>
                  <button class="btn btn-ghost" style="margin-top:12px; width: 100%;" onclick="window.history.back()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô</button>
                <% } %>
              </div>
            </div>
          </div>

          <!-- chat removed per request -->
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-bottom">
        <div class="copyright">Swap A Book <%= new Date().getFullYear() %></div>
      </div>
    </footer>
  </body>
</html>
