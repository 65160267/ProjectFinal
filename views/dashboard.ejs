<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Swap A Book ‚Äî Dashboard</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <% 
      // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà controller ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏≤ (‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏Å‡∏¥‡∏î ReferenceError)
      if (typeof featured === 'undefined') featured = [];
      if (typeof recommendedA === 'undefined') recommendedA = [];
      if (typeof recommendedB === 'undefined') recommendedB = [];
    %>
    <!-- Header -->
    <header class="site-header">
      <div class="header-inner container">
        <div class="brand">SwapABook</div>
        <form class="search" action="/" method="get">
          <input name="q" placeholder="Search for books" />
          <button type="submit">üîç</button>
        </form>
        <nav class="header-actions">
          <a href="/books" title="Cart">üõçÔ∏è</a>
          <a href="/auth/logout" title="Logout">üîì</a>
        </nav>
      </div>
    </header>

    <main>
      <!-- compact welcome + stats -->
      <section class="container">
        <div class="card" style="padding:20px">
          <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, <%= user && user.username ? user.username : 'User' %></h2>
          <p class="muted">‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
          <div style="display:flex;gap:16px;margin-top:12px">
            <div class="card" style="flex:1;padding:12px">
              <h4>‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
              <p style="font-size:20px;font-weight:700;margin:6px 0"><%= stats && stats.booksCount ? stats.booksCount : 0 %></p>
            </div>
            <div class="card" style="flex:1;padding:12px">
              <h4>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
              <p style="font-size:20px;font-weight:700;margin:6px 0"><%= stats && stats.usersCount ? stats.usersCount : 0 %></p>
            </div>
          </div>
          <div style="margin-top:12px">
            <a class="btn btn-primary" href="/books">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</a>
            <a class="btn btn-ghost" href="/auth/logout" style="margin-left:8px">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer (minimal) -->
    <footer class="site-footer">
      <div class="container footer-bottom">
        <div class="copyright">Swap A Book <%= new Date().getFullYear() %> By Weerapat Tapaothong</div>
      </div>
    </footer>

    <script>
      // apply background images from data-thumb attributes
      document.querySelectorAll('.thumb[data-thumb], .small-thumb[data-thumb]').forEach(el => {
        const url = el.getAttribute('data-thumb') || '/images/placeholder.png';
        el.style.backgroundImage = `url(${url})`;
      });
    </script>

  </body>
</html>
